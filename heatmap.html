<!DOCTYPE html>
<html>
  <head>
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script>
      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 2,
          center: new google.maps.LatLng(2.8,-187.3),
          mapTypeId: 'terrain'
        });

        // feature.getProperty('mag') is getting mag property of json pull
        map.data.setStyle(function(feature) {
          var magnitude = feature.getProperty('mag');
          return {
            icon: getCircle(magnitude)
          };
        });
      }

      function getCircle(magnitude) {
        return {
          path: google.maps.SymbolPath.CIRCLE,
          fillColor: getColor(magnitude),
          fillOpacity: .2,
          scale: Math.pow(2, magnitude) / 2,
          strokeColor: 'white',
          strokeWeight: .5
        };
      }

      // Set color based on magnitude
      function getColor(magnitude) {
      	if (magnitude > 0 && magnitude < 4)
      		return 'blue';
      	else if (magnitude > 4 && magnitude < 6)
      		return 'yellow';
      	else if (magnitude > 6)
      		return 'red';
      }

      function eqfeed_callback(results) {
      	console.log(results);
        map.data.addGeoJson(results);
      }

      // Loop through the results array and place a marker for each
      // set of coordinates.
      // window.eqfeed_callback = function(results) {
      //   for (var i = 0; i < results.features.length; i++) {
      //     var coords = results.features[i].geometry.coordinates;
      //     var latLng = new google.maps.LatLng(coords[1],coords[0]);
      //     var marker = new google.maps.Marker({
      //       position: latLng,
      //       map: map
      //     });
      //   }
      // }
    </script>
    <script>
		    // Create a script tag and set the USGS URL as the source.
		var script = document.createElement('script');

		// //Grabbing from github api
  //       script.src = 'https://api.github.com/events';

		script.src = 'http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_week.geojsonp';
		document.getElementsByTagName('head')[0].appendChild(script);
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDmr0OdznmwX2l4iuxwX1RHOmcDLbUrJPM&callback=initMap">
    </script>
  </body>
</html>